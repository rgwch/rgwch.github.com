---
layout: post
title: Docker
description: Dockerfile für Webelexis
category: Programmieren Allgemein
tags: [docker]
---

Auch [Docker](https://www.docker.com) gehört zu den Tools, die ich schon lange in meiner "Todo" bzw. "ToLookAt" Schublade habe.

## Installation

Wer einen Mac mit homebrew hat, ist fein raus:

    brew install docker
    brew install boot2docker
    boot2docker init
    boot2docker up
    
fertig.

Für andere Betriebsysteme stellt Docker [Installationsanleitungen](https://docs.docker.com/installation/#installation) bereit.
Bottomline: Man braucht ein halbwegs aktuelles 64-Bit Betriebssystem.

## Webelexis-Container herunterladen und starten:

    1. docker run rgwch/webelexis-alpine

Das war's. Es gibt kein 2. und kein 3. Webelexis ist in Linux jetzt unter localhost:2015 erreichbar, in Mac und Windows 
unter der IP des docker containers.

## Webelexis-Container selber bauen

Hier ein Dockerfile, um einen Webelexis Container zu erstellen. Als Basis nahm ich [Alpine Linux](http://alpinelinux.org), dessen 
hervorstechendste Eigenschaft die geringe Grösse ist (5 MB vs 130 MB (Ubuntu) oder 200 MB (Arch) für den Basis-Container).
Wenn diesed Dockerfile fertig ist, sind allerdings trotzdem 300MB daraus geworden...


     FROM alpine:edge
     MAINTAINER weirich@elexis.ch
     RUN apk add --update openjdk7 git nodejs bash
     ENV JAVA_HOME /usr/lib/jvm/default-jvm
     RUN ln -s /usr/lib/jvm/default-jvm/bin/javac /usr/bin/javac
     RUN adduser -D -s bash webelexis
     USER webelexis
     WORKDIR /home/webelexis
     RUN git clone https://github.com/rgwch/webelexis
     RUN wget https://bintray.com/artifact/download/vertx/downloads/vert.x-2.1.5.tar.gz
     RUN tar -xzf vert.x-2.1.5.tar.gz
     ENV VERTX_HOME /home/webelexis/vert.x-2.1.5
     ENV PATH $PATH:$VERTX_HOME/bin
     ENV VERTX_MODS $VERTX_HOME/modules
     COPY langs.properties $VERTX_HOME/conf/langs.properties
     WORKDIR /home/webelexis/webelexis/webelexis-base
     RUN npm install
     RUN cp src/main/resources/config_sample.json cfglocal.json
     EXPOSE 2015
     ENTRYPOINT npm start
     
